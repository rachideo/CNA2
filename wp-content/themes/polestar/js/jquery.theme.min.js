jQuery(function(o){function e(){var e=o(window).scrollTop(),t="no";o(".panel-row-style").each(function(){var i="#"+o(this).attr("id"),n=o(this).offset().top-1,a=o(this).outerHeight(),s=n-headerHeight(),r=n+a-headerHeight();return e>=s&&e<=r?(t="yes",o("#site-navigation .current").removeClass("current"),o('#site-navigation a[href$="'+i+'"]').parent("li").addClass("current"),!1):void("no"===t&&o("#site-navigation .current").removeClass("current"))})}o.fn.polestarIsVisible=function(){var o=this[0].getBoundingClientRect();return o.bottom>=0&&o.right>=0&&o.top<=(window.innerHeight||document.documentElement.clientHeight)&&o.left<=(window.innerWidth||document.documentElement.clientWidth)},o(window).load(function(){o(".entry-thumbnail").each(function(){img=o(this).find("img"),img_width=img.width(),img_height=img.height(),o(this).css({maxWidth:img_width,maxHeight:img_height})})}),"undefined"!=typeof o.fn.fitVids&&o(".entry-content, .entry-content .panel, .entry-video, .woocommerce #main").fitVids({ignore:".tableauViz"}),o(document).ready(function(){o(".flexslider").each(function(){o(this).flexslider({animation:"slide",controlNav:!1,customDirectionNav:o(this).find(".flex-direction-nav a"),start:function(){o(".flexslider .slides img").show()}})})});var t=function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>o("#masthead").outerHeight()?o("#scroll-to-top").hasClass("show")||o("#scroll-to-top").css("pointer-events","auto").addClass("show"):o("#scroll-to-top").hasClass("show")&&o("#scroll-to-top").css("pointer-events","none").removeClass("show")};t(),o(window).scroll(t),o("#scroll-to-top").click(function(){o("html, body").animate({scrollTop:0})});var i=o("#header-search");o("#masthead .search-icon").click(function(){i.fadeIn("fast"),i.find("form").css("margin-top",-i.find("form").innerHeight()/2),i.find('input[type="search"]').focus().select(),i.find("#close-search").addClass("animate-in")}),i.find("#close-search").click(function(){i.fadeOut(350),o(this).removeClass("animate-in")}),o(window).scroll(function(){i.is(":visible")&&i.find("form").css("margin-top",-i.find("form").outerHeight()/2)}),o("#header-search input[type=search]").on("focusout",function(e){o("body").hasClass("disable-search-close")||o("#close-search.animate-in").trigger("click")}),o(document).keyup(function(e){27===e.keyCode&&o("#close-search.animate-in").trigger("click")}),o(window).load(function(){o("body.no-js").removeClass("no-js"),o("body").hasClass("css3-animations")&&(o(".menu-item").children("a").focus(function(){o(this).parents("ul, li").addClass("focus")}),o(".menu-item").children("a").click(function(){o(this).parents("ul, li").removeClass("focus")}),o(".menu-item").children("a").focusout(function(){o(this).parents("ul, li").removeClass("focus")}))}),o(document).ready(function(o){window.location.hash||(o('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),o(window).scroll(function(){o("#site-navigation ul li").hasClass("current")&&o("#site-navigation li").removeClass("current-menu-item")}))}),("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints||window.navigator.MaxTouchPoints)&&(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(o("body").css("cursor","pointer"),o("body").addClass("ios")),o(".main-navigation #primary-menu").find(".menu-item-has-children > a").each(function(){o(this).on("click touchend",function(e){var t=o(this);e.stopPropagation(),"click"!=e.type&&(t.parent().hasClass("hover")||(o(".menu-item.hover").removeClass("hover"),t.parents(".menu-item").addClass("hover"),e.preventDefault()),o(document).one("click",function(){t.parent().removeClass("hover")}))})})),headerHeight=function(){var e,t=o("#wpadminbar").outerHeight(),i=o("body").hasClass("admin-bar"),n=o("header").hasClass("sticky");return e=n&&i&&o(window).width()>600?t+o("header").outerHeight()-1:n?o("header").outerHeight()-1:0},o.fn.polestarSmoothScroll=function(){o("body").hasClass("disable-smooth-scroll")||o(this).click(function(e){var t=this.hash,i=t.substring(1),n=this;if(o(".panel-grid [id*="+i+"]").length>0?(o("#site-navigation .current").removeClass("current"),o(n).parent("li").addClass("current")):o("#site-navigation .current").removeClass("current"),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=o(this.hash);if(a=a.length?a:o("[name="+this.hash.slice(1)+"]"),a.length)return o("html, body").animate({scrollTop:a.offset().top-headerHeight()},{duration:1200,start:function(){o("html, body").on("wheel touchmove",function(){o("html, body").stop().off("wheel touchmove")})},complete:function(){o("html, body").finish().off("wheel touchmove")}}),!1}})},o(window).load(function(){o('#site-navigation a[href*="#"]:not([href="#"]), .comments-link a[href*="#"]:not([href="#"]), .puro-scroll[href*="#"]:not([href="#"])').polestarSmoothScroll()}),o(window).load(function(){if(location.pathname.replace(/^\//,"")==window.location.pathname.replace(/^\//,"")&&location.hostname==window.location.hostname){var e=o(window.location.hash);if(e.length)return o("html, body").animate({scrollTop:e.offset().top-headerHeight()},0),!1}}),o(window).on("scroll",e);var n=!1;o("#mobile-menu-button").click(function(e){e.preventDefault();var t=o(this);if(t.toggleClass("to-close"),n===!1){n=o("<div></div>").append(o(".main-navigation ul").first().clone()).attr("id","mobile-navigation").appendTo("#masthead").hide(),o("#header-search form").length&&n.append(o("#header-search form").clone()),o(".main-navigation .shopping-cart").length&&n.append(o(".main-navigation .shopping-cart .shopping-cart-link").clone()),n.find("#primary-menu").show().css("opacity",1),n.find(".menu-item-has-children > a").addClass("has-dropdown"),n.find(".page_item_has_children > a").addClass("has-dropdown"),n.find(".has-dropdown").after('<button class="dropdown-toggle" aria-expanded="false"><i class="icon-chevron-down" aria-hidden="true"></i></button>'),n.find(".dropdown-toggle").click(function(e){e.preventDefault(),o(this).toggleClass("toggle-open").next(".children, .sub-menu").slideToggle("fast")}),n.find(".has-dropdown").click(function(e){"undefined"!=typeof o(this).attr("href")&&"#"!=o(this).attr("href")||(e.preventDefault(),o(this).siblings(".dropdown-toggle").trigger("click"))});var i=function(){if(o("#masthead").hasClass("sticky")){var e="fixed"===o("#wpadminbar").css("position")?o("#wpadminbar").outerHeight():0,t=o("#masthead").innerHeight(),i=o(window).height()-t-e;o("#mobile-navigation").css("max-height",i)}};i(),o(window).resize(i),o("#mobile-navigation").scroll(i)}n.slideToggle("fast"),o("#mobile-navigation a").click(function(e){(!o(this).hasClass("has-dropdown")||"undefined"!=typeof o(this).attr("href")&&"#"!==o(this).attr("href"))&&n.is(" :visible")&&n.slideUp("fast"),t.removeClass("to-close")}),o('#mobile-navigation a[href*="#"]:not([href="#"])').polestarSmoothScroll()})}),function(o){o(window).load(function(){polestar.logoScale=parseFloat(polestar.logoScale);var e=o("#masthead"),t={top:parseInt(e.css("padding-top")),bottom:parseInt(e.css("padding-bottom"))};if(e.data("scale-logo")){var i=e.find(".site-branding img"),n=i.width(),a=i.height(),s=n*polestar.logoScale;scaledHeight=a*polestar.logoScale,o(".site-branding img").wrap("<div class='custom-logo-wrapper'></div>");var r=function(){var n=e.find(".site-branding > *"),a=window.pageYOffset||document.documentElement.scrollTop;if(a>0?e.css({"padding-top":t.top*polestar.logoScale,"padding-bottom":t.bottom*polestar.logoScale}):e.css({"padding-top":t.top,"padding-bottom":t.bottom}),i.length)if(a>0){var r=polestar.logoScale+Math.max(0,48-a)/48*(1-polestar.logoScale);i.height()==scaledHeight&&i.width()==s&&r==polestar.logoScale||o(".site-branding img").css({width:100*r+"%"})}else o(".site-branding img").css({width:""});else a>0?n.css("transform","scale("+polestar.logoScale+")"):n.css("transform","scale(1)")};r(),o(window).scroll(r).resize(r)}if(o("#masthead").hasClass("sticky")){var e=o("#masthead"),l=o('<div class="masthead-sentinel"></div>').insertAfter(e),c=o("#topbar"),d=o('#topbar .woocommerce-store-notice[style*="display: none"]'),h=function(){o("body").hasClass("mobile-header-ns")&&o(window).width()<polestar.collapse||(l!==!1&&l.css("height",e.outerHeight()),o("body").hasClass("no-topbar")||c.polestarIsVisible()||o("body").addClass("topbar-out"),c.length&&o("body").hasClass("topbar-out")&&c.polestarIsVisible()&&o("body").removeClass("topbar-out"),o("body").hasClass("no-topbar")&&!o(window).scrollTop()&&o("body").addClass("topbar-out"),o("body").hasClass("no-topbar")||!o("body").hasClass("no-topbar")&&o("body").hasClass("topbar-out")||d.length?e.css("position","fixed"):o("body").hasClass("no-topbar")||o("body").hasClass("topbar-out")||e.css("position","absolute"))};h(),o(window).resize(h).scroll(h);var m=function(){o(window).scrollTop()>0?o(e).addClass("stuck"):o(e).removeClass("stuck")};m(),o(window).scroll(m)}})}(jQuery);