jQuery(function(d){d(".so-addon-banner").each(function(){var a=d(this);if(!a.find("img").length){var i=Trianglify({width:128,height:128,variance:1,cell_size:32,seed:a.data("seed")});a.append(i.svg())}}),d(".so-addon").each(function(){var e=d(this),i=e.data("id"),s=e.data("section");e.find(".so-addon-toggle-active button").click(function(a){var o=d(this),n=parseInt(o.data("status"));o.prop("disabled",!0),d.post(d("#addons-list").data("action-url"),{id:i,section:s,status:n,activate_required:1},function(a){if(o.prop("disabled",!1),n?(e.removeClass("so-addon-is-inactive").addClass("so-addon-is-active"),e.find(".so-addon-settings").show()):(e.removeClass("so-addon-is-active").addClass("so-addon-is-inactive"),e.find(".so-addon-settings").hide()),void 0!==a.action_links&&a.action_links.length){var i=e.find(".so-addon-links").empty();i.length||(i=d('<div class="so-addon-links"></div>').insertAfter(e.find(".so-addon-name"))),i.html(a.action_links.join(" | "))}d(window).resize()})})}),d(".so-addon .so-addon-tags a").click(function(a){a.preventDefault();var i=d(this);d(".addons-search").val(i.data("tag")),o()});var e="";d(".page-sections a").click(function(a){a.preventDefault(),d(".page-sections li").removeClass("active-section");var i=d(this);e=i.data("section"),i.parent("li").addClass("active-section"),o()});var o=function(){var o=e,n=d(".addons-search").val();""===n?""===o?d(".so-addon-wrap").show():(d(".so-addon-wrap").hide(),d('.so-addon[data-section="'+e+'"]').parents().show()):d(".so-addon").each(function(){var a=d(this),i=a.find("h3").html()+" "+a.find(".so-addon-description").html();a.find(".so-addon-tags a").each(function(){i+=d(this).data("tag")+" "}),-1<i.toLowerCase().indexOf(n)&&(""===o||a.data("section")===o)?a.parent().show():a.parent().hide()})};o(),d(".addons-search").on({keyup:o,change:o,search:o}),d(window).resize(function(){var a=d(".so-addon").css("height","auto"),i=0;a.each(function(){i=Math.max(i,d(this).height())}),a.each(function(){d(this).css("height",i)})}).resize();var n=d("#siteorigin-premium-settings-dialog"),s=d("#addons-list .so-addon-settings");s.click(function(a){var i=d(this);a.preventDefault();var o=n.find(".so-content");o.empty().addClass("so-loading"),d.get(i.data("form-url")).done(function(a){o.html(a)}).fail(function(a){o.html(soPremiumAddons.settingsForm.error),console.error(a)}).always(function(){o.removeClass("so-loading")}),n.show()}),n.find(".so-close").click(function(a){a.preventDefault(),n.hide()}),n.find(".so-save").click(function(a){a.preventDefault();var i=d(this);i.prop("disabled",!0),s.prop("disabled",!0),n.find("form").submit(function(){i.prop("disabled",!1),n.hide()}).submit()}),d("#so-premium-addon-settings-save").load(function(){d("#addons-list .so-addon-settings").prop("disabled",!1)});var t=d(".modal-video");t.find(".modal-video-close-btn").addBack().click(function(){var a=t.find("iframe.active").removeClass("active");a.length&&a.data("player").pause();t.hide()}),d(document).keyup(function(a){"Escape"===a.key&&t.find(".modal-video-close-btn").click()}),d(".js-modal-video").each(function(){var a,i=d(this),o=i.data("video-id"),n="https://player.vimeo.com/video/"+o+"?autoplay=0";0===(a=d("iframe#video_"+o)).length&&(a=d("<iframe >").attr({id:"video_"+o,src:n,allow:"autoplay",allowfullscreen:"1"}).appendTo(t.find(".modal-video-movie-wrap")));var e=new Vimeo.Player(a);a.data("player",e),e.on("play",function(){a.is(":visible")||e.pause()}),i.click(function(){t.find("iframe").hide(),a.show().addClass("active"),t.show(),e.play()})}),t.show().hide()});