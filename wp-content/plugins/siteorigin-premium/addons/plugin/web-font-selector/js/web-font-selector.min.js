!function(b){var n={},y={};b.fn.webfontselector=function(){var t=Array.prototype.slice.call(arguments);if("string"==typeof t[0]){var e=t[0];n.hasOwnProperty(e)&&"function"==typeof n[e]&&(1<t.length?n[e].apply(this,t.slice(1)):n[e].apply(this))}else"object"==typeof t[0]?n.init.apply(this,t):console.log("No default options yet! Please call webfontselector with a method name or an options object.")},n.init=function(g){return g=n.setDefaultOptions(g),this.each(function(){var s=b(this),t=s.parent();if(s.append('<option value="" data-webfont="false"></option>'),g.useInherit&&s.append('<option value="inherit" data-webfont="false">Inherit</option>'),g.useVariants){t.append('<div class="field-wrapper"><label>Variant</label><select class="font-variant"></select></div>');var r=t.find("select.font-variant");r.parent().hide()}if(g.useSubsets){t.append('<div class="field-wrapper"><label>Subset</label><select class="font-subset"></select></div>');var l=t.find("select.font-subset");l.parent().hide()}var p=!1;for(var e in g.modules){var n=g.modules[e],a=n.hasOwnProperty("label")?n.label:e,o=b('<optgroup label="'+a+'"></optgroup>');for(var i in o.data("module",e),s.append(o),n.fonts){var f=n.fonts[i],d=b("<option>"+i+"</option>");d.val(i),f.hasOwnProperty("variants")&&f.variants.length&&d.data("variants",f.variants.join(",")),f.hasOwnProperty("subsets")&&f.subsets.length&&d.data("subsets",f.subsets.join(",")),d.data("category",f.category),d.data("webfont","web_safe"!==e),d.attr("style","font-family: '"+i+"', "+f.category+", __"+e),o.append(d)}}s.change(function(){var t=b(this).find("option:selected");if(g.useVariants)if(r.empty().val(""),void 0!==t.data("variants")){var e=t.data("variants").split(",");r.append(b("<option></option>")).val(""),b.each(e,function(t,e){r.append(b("<option></option>").html(e))}),-1<e.indexOf("regular")?r.val("regular"):-1<e.indexOf("400")?r.val("400"):r.val(e[0]),2<r.find("option").length?r.parent().show():r.parent().hide()}else r.parent().hide();g.useSubsets&&(l.empty().val(""),void 0!==t.data("subsets")?(l.append(b("<option></option>")),b.each(t.data("subsets").split(","),function(t,e){l.append(b("<option></option>").html(e))}),l.val("latin"),2<l.find("option").length?l.parent().show():l.parent().hide()):l.parent().hide())});var c=function(t,e){if(p){var n={};n.font=s.val();var a=s.find("option:selected");n.webfont=a.data("webfont"),n.category=a.data("category"),g.useVariants&&(n.variant=r.val()),g.useSubsets&&(n.subset=l.val()),n.module=a.parent().data("module");var o=a.attr("style");o?!n.webfont||y.hasOwnProperty(n.font)&&y[n.font]||(WebFont.load({google:{families:[n.font]}}),y[n.font]=!0):o=null,s.siblings(".chosen-container").find(".chosen-single > span").attr("style",o);var i=b(this).data("currentValue");e&&e.silent||b(this).trigger("font_change",[n,i]),b(this).data("currentValue",n)}}.bind(this);t.find("select").change(c);var u=null;if(null===u){var h=null;s.on("chosen:ready",function(t,e){var n=e.chosen.dropdown,s=n.find(".chosen-results");n.find(".chosen-results").on("scroll",function(){clearTimeout(h),h=setTimeout(function(){var n,a,o,i={};s.find("li").each(function(){var t=b(this),e=t.position().top;void 0!==t.attr("style")&&""!==t.attr("style")&&-1===t.attr("style").indexOf("__web_safe")&&-10<e&&e<s.outerHeight()+30&&(o=t.attr("style").match(/font-family: ([^,]+),.*__([^,]+);/),a=o[1].replace(/['"]/g,"").trim(),n=o[2],void 0===i[n]&&(i[n]=[]),void 0===y[a]&&(i[n].push(a),y[a]=!0))}),i.hasOwnProperty("google")&&0<i.google.length&&WebFont.load({google:{families:i.google}})},500)}),setTimeout(function(){s.trigger("scroll")},500),e.chosen.search_field.on("keyup",function(){setTimeout(function(){s.trigger("scroll")},500)})}).on("chosen:showing_dropdown",function(t,e){e.chosen.dropdown.find(".chosen-results").trigger("scroll")});var v={allow_single_deselect:!0,search_contains:!0};g.hasOwnProperty("width")&&(v.width=g.width),s.chosen(v),u=!0}p=!0})},n.setDefaultOptions=function(t){var e={useVariants:!0,useSubsets:!0};for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},n.update=function(t,e){var n=t;if(n&&"inherit"!==n){var a=(n=n.split(",")[0]).match(/[\'\"]?([^\'\"]+)[\'\"]?/);null!=a&&(n=1<a.length?a[1]:a[0])}this.val()!==n&&(this.val(n),this.trigger("chosen:updated"),this.trigger("change",{silent:!0}));var o=this.parent().find("select.font-variant");o.length&&e&&o.val(e)}}(jQuery);