jQuery(function(s){s(document).on("before_panels_setup",function(e,i){var t=new URLSearchParams(window.location.search);t.has("tab")||(t.set("tab","content-single-product"),window.history.replaceState({},"",window.location.pathname+"?"+t));var o=t.get("tab"),n="woocommerce_"+o.replace(/\-/g,"_");s(document).on("open_dialog",function(e,t){t instanceof panels.dialog.widgets&&t.el.querySelector('.so-sidebar-tabs a[href="#'+n+'"]').click()});var c,a,d=1,r=document.getElementById("so-wc-preview-template");r&&r.addEventListener("click",function(){if(!a){var e=document.getElementById("so-premium-wc-template-preview").innerHTML,t=document.createElement("div");t.innerHTML=e,a=t.querySelector("#so-premium-wc-template-preview-dialog"),document.body.append(a),a.querySelectorAll(".so-close").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),a.style.display="none"})})}var n=document.getElementById("so-premium-wc-template-form");!function(e,t,n){c&&c.remove();var i="so-wc-template-preview-"+d;(c=document.createElement("iframe")).setAttribute("src","javascript:false;"),c.setAttribute("id",i),c.setAttribute("name",i),n.appendChild(c);var o=document.createElement("form");for(var a in o.setAttribute("id","soPostToPreviewFrame"),o.setAttribute("method","post"),o.setAttribute("id",i),o.setAttribute("target",i),o.setAttribute("action",t),document.body.appendChild(o),e){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",a),r.setAttribute("value",e[a]),o.appendChild(r)}o.submit(),o.remove(),d++}({template_preview_panels_data:JSON.stringify(i.model.getPanelsData()),preview_template_post_id:n.getAttribute("data-post-id"),siteorigin_premium_template_preview:!0,tab:o},r.getAttribute("data-preview-url"),a.querySelector(".so-content")),a.style.display="block"});if("content-single-product"===o||"content-product"===o){var l=document.getElementById("so-wc-selected-template");l&&l.addEventListener("change",function(e){t.set("template_post_id",l.value),window.location.href=window.location.pathname+"?"+t});var m=document.getElementById("so-wc-delete-template");m&&m.addEventListener("click",function(e){confirm(soPremiumWcTemplateBuilder.confirm_delete_template)||e.preventDefault()})}})});